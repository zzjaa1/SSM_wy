<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>算费管理</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/property.css">
    <link rel="stylesheet" href="../../css/property_cost_management.css">
    <script src="/ssm_wy/js/jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" href="/ssm_wy/layui/css/layui.css" media="all">
    <script src="/ssm_wy/layui/layui.js"></script>
    <link href="/ssm_wy/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link href="/ssm_wy/bootstrap-treeview/src/css/bootstrap-treeview.css" rel="stylesheet">
    <script src="/ssm_wy/bootstrap/dist/js/bootstrap.js"></script>
    <script src="/ssm_wy/bootstrap-treeview/src/js/bootstrap-treeview.js"></script>



</head>
<body>
    <script>

        /*全部作废效果*/
        $('#bt2').click(function()
        {
            $('#zhezhao').show();
            $('#login2').show();
            $('#login2').animate({'top':'200px'},300);
        });
        $('#btclose4').click(function()
        {
            $('#login2').animate({'top':'-200px'},200,function () {
                $('#login2').hide();
                $('#zhezhao').hide();
            });
        });
        $('#btclose5').click(function()
        {
            $('#login2').animate({'top':'-200px'},200,function () {
                $('#login2').hide();
                $('#zhezhao').hide();
            });
        });
        $('#btclose6').click(function()
        {
            $('#login2').animate({'top':'-200px'},200,function () {
                $('#login2').hide();
                $('#zhezhao').hide();
            });

        });

        /*全部审核效果*/
        $('#bt').click(function()
        {
            $('#zhezhao').show();
            $('#login').show();
            $('#login').animate({'top':'200px'},300);
        });
        $('#btclose').click(function()
        {
            $('#login').animate({'top':'-200px'},200,function () {
                $('#login').hide();
                $('#zhezhao').hide();
            });
        });
        $('#btclose2').click(function()
        {
            $('#login').animate({'top':'-200px'},200,function () {
                $('#login').hide();
                $('#zhezhao').hide();
            });
        });
        $('#btclose3').click(function()
        {
            $('#login').animate({'top':'-200px'},200,function () {
                $('#login').hide();
                $('#zhezhao').hide();
            });

        });
        /*删除效果*/
        $('.list button').click(function () {
            $(this).parent().parent().remove();
        });
        $('.hr_div1').click(function(){
            var i=$('.hr_div1').index(this);
            if($(".header_list").eq(i).get(0).style.display=="block"){
                $(".header_list").eq(i).hide()
            }else{
                $(".header_list").hide()
                $(".header_list").eq(i).show()
            }
        })
        $('.hdl_select').click(function () {
            var a=$(this).html();
            $('.hr_show').html(a);
        });

    </script>
    <div class="layui-container">
        <div class="layui-row">
            <div class="layui-col-md9">
                <div>
                    <em><img src="../../images/wy.png" alt=""></em><a href="#">费用设置</a><span>></span><a href="#">算费管理</a>
                </div>
                <div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 100px">当前费项：</label>
                        <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                            <input type="text" class="layui-input" id="">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 100px">单价：</label>
                        <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                            <input type="text" class="layui-input" id="">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 160px">收费周期(月)：</label>
                        <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                            <input type="text" class="layui-input" id="" style="width: 100px">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 100px">费用起期：</label>
                        <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                            <input type="text" class="layui-input" id="test1">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 100px">费用止期：</label>
                        <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                            <input type="text" class="layui-input" id="test2">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 100px">费用限期：</label>
                        <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                            <input type="text" class="layui-input" id="test3">
                        </div>
                    </div>
                    <script>
                        layui.use('laydate', function(){
                            var laydate = layui.laydate;
                            //执行一个laydate实例
                            laydate.render({
                                elem: '#test1' ,//指定元素
                            });
                            laydate.render({
                                elem: '#test2' ,//指定元素
                            });
                            laydate.render({
                                elem: '#test3' //指定元素
                            });
                        });
                    </script>
                    <!--<div class="layui-inline">
                        <form class="layui-form" action="">
                            <label class="layui-form-label">商品类型：</label>
                            <div class="layui-input-inline">
                                <select name="goodstypeuuid2" id="gtypeuuid" lay-verify="" lay-search="">
                                    <option value="0">请选择您要查询的类型</option>
                                </select>
                            </div>
                            <a href="javascript:void(0);" class="layui-btn" id="goodsQuery">查询</a>
                        </form>
                    </div>-->
                </div>
            </div>
            <div class="layui-col-md3">
                你的内容 3/12
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-col-xs6 layui-col-sm6 layui-col-md4">
                <!--节点定位、禁用选项、-->
                <div class="layui-inline">
                    <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                        <input type="text" class="layui-input" id="dw" style="width: 110px" placeholder="定位关键字">
                    </div>
                </div>
&nbsp;
                <button class="layui-btn layui-btn-normal" onclick="dw()" style="width: 110px">立即定位</button>
                <button class="layui-btn layui-btn-normal" onclick="qxdw()" style="width: 110px">取消定位</button>
                <div style="height: 10px;"></div>
                <div class="layui-inline">
                    <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                        <input type="text" class="layui-input" id="jy" style="width: 110px" placeholder="禁用关键字">
                    </div>
                </div>
                &nbsp;
                <button class="layui-btn layui-btn-danger" onclick="gjzjy()" style="width: 110px">关键字禁用</button>
                <button class="layui-btn layui-btn-danger" onclick="jyxzjd()" style="width: 110px">禁用选择节点</button>
                <div style="height: 10px;"></div>
                <button class="layui-btn layui-btn-danger" onclick="jy()" style="width: 110px;padding-left: -10px">禁用所有节点</button>
                <button class="layui-btn layui-btn-danger" onclick="qxjy()" style="width: 110px">取消禁用节点</button>
                <div style="height: 10px;"></div>
               <h4 style="color: #00FF00">提示：关键字以及节点禁用针对于房间</h4>
                <div id="searchTree"></div>
                <script>
                    var nodeCheckedSilent = false;
                    function nodeChecked(event, node) {
                        if (nodeCheckedSilent) {
                            return;
                        }
                        nodeCheckedSilent = true;
                        checkAllParent(node);
                        checkAllSon(node);
                        nodeCheckedSilent = false;

                    }
                    var nodeUncheckedSilent = false;
                    function nodeUnchecked(event, node) {
                        console.log("取消");
                        if (nodeUncheckedSilent)
                            return;
                        nodeUncheckedSilent = true;
                        uncheckAllParent(node);
                        uncheckAllSon(node);
                        nodeUncheckedSilent = false;

                    }
                    //选中全部父节点
                    function checkAllParent(node) {
                        $('#searchTree').treeview('checkNode', node.nodeId, {
                            silent: true
                        });
                        var parentNode = $('#searchTree').treeview('getParent', node.nodeId);
                        if (!("nodeId" in parentNode)) {
                            return;
                        } else {
                            checkAllParent(parentNode);
                        }

                    }
                    //取消全部父节点
                    function uncheckAllParent(node) {
                        $('#searchTree').treeview('uncheckNode', node.nodeId, {
                            silent: true
                        });
                        var siblings = $('#searchTree').treeview('getSiblings', node.nodeId);
                        var parentNode = $('#searchTree').treeview('getParent', node.nodeId);
                        if (!("nodeId" in parentNode)) {
                            return;
                        }
                        var isAllUnchecked = true; //是否全部没选中
                        for (var i in siblings) {
                            if (siblings[i].state.checked) {
                                isAllUnchecked = false;
                                break;
                            }
                        }
                        if (isAllUnchecked) {
                            uncheckAllParent(parentNode);
                        }

                    }

                    //级联选中所有子节点
                    function checkAllSon(node) {
                        //console.log(node.state.disabled);
                        if(!node.state.disabled){
                        $('#searchTree').treeview('checkNode', node.nodeId, {
                            silent: true
                        });

                        if (node.nodes != null && node.nodes.length > 0) {
                            for (var i in node.nodes) {
                                console.log()
                                checkAllSon(node.nodes[i]);
                            }
                        }
                        }
                    }
                  var options="";
                    //级联取消所有子节点
                    function uncheckAllSon(node) {
                        $('#searchTree').treeview('uncheckNode', node.nodeId, {
                            silent: true
                        });
                        if (node.nodes != null && node.nodes.length > 0) {
                            for (var i in node.nodes) {
                                uncheckAllSon(node.nodes[i]);
                            }
                        }
                    }
                    $.get("/ssm_wy/queryBootstraptree",
                        function(result, state) {
                            var data=result.li;
                            options= {
                                data:data, //data属性是必须的，是一个对象数组    Array of Objects.
                                color: "", //所有节点使用的默认前景色，这个颜色会被节点数据上的backColor属性覆盖.        String
                                backColor: "#96FED1", //所有节点使用的默认背景色，这个颜色会被节点数据上的backColor属性覆盖.     String
                                borderColor: "#000000", //边框颜色。如果不想要可见的边框，则可以设置showBorder为false。        String
                                //nodeIcon: "glyphicon glyphicon-home", //所有节点的默认图标glyphicon glyphicon-stop
                                checkedIcon: "glyphicon glyphicon-check", //节点被选中时显示的图标         String
                                //collapseIcon: "glyphicon glyphicon-minus", //节点被折叠时显示的图标        String
                                //expandIcon: "glyphicon glyphicon-plus", //节点展开时显示的图标        String
                                //emptyIcon: "glyphicon", //当节点没有子节点的时候显示的图标              String
                                enableLinks: false, //是否将节点文本呈现为超链接。前提是在每个节点基础上，必须在数据结构中提供href值。        Boolean
                                highlightSearchResults: true, //是否高亮显示被选中的节点        Boolean
                                levels: 1, //设置整棵树的层级数  Integer
                                multiSelect: false, //是否可以同时选择多个节点      Boolean
                                onhoverColor: "#00EC00", //光标停在节点上激活的默认背景色      String
                                selectedIcon: "glyphicon glyphicon-zoom-in", //节点被选中时显示的图标     String
                                searchResultBackColor: "#FF2D2D", //当节点被选中时的背景色
                                searchResultColor: "#00EC00", //当节点被选中时的前景色
                                selectedBackColor: "#007979", //当节点被选中时的背景色
                                selectedColor: "#FFFFFF", //当节点被选中时的前景色
                                showBorder: false, //是否在节点周围显示边框
                                showCheckbox: true, //是否在节点上显示复选框
                                showIcon: true, //是否显示节点图标
                                showTags: true, //是否显示每个节点右侧的标记。前提是这个标记必须在每个节点基础上提供数据结构中的值。
                                //
                                // uncheckedIcon: "glyphicon glyphicon-unchecked", //未选中的复选框时显示的图标，可以与showCheckbox一起使用
                                onNodeChecked: nodeChecked,
                                onNodeUnchecked: nodeUnchecked
                            }
                            $('#searchTree').treeview(options);
                        });

                    //节点定位
                  function dw() {
                      var gjz=$('#dw').val();
                      var aa= $('#searchTree').treeview('search', [gjz, {
                          ignoreCase:true,     // case insensitive
                          exactMatch:false,    // like or equals
                          revealResults:true,  // reveal matching nodes
                      }]);
                  }
                  //取消节点定位
                    function qxdw() {
                            var aa= $('#searchTree').treeview('search', ['', {
                                ignoreCase:true,     // case insensitive
                                exactMatch:false,    // like or equals
                                revealResults:true,  // reveal matching nodes
                            }]);
                    }
                    //关键字禁用
                    function gjzjy() {
                        var gjz=$('#jy').val();
                        var a= $('#searchTree').treeview('search', [gjz, {
                            ignoreCase:true,     // case insensitive
                            exactMatch:false,    // like or equals
                            revealResults:true,  // reveal matching nodes
                        }]);
                        qxdw();
                        for (var i=0;i<a.length;i++){
                            console.log(a[i]);
                            var s=a[i].id;
                            if(s.search('S')!=-1){
                                $('#searchTree').treeview('disableNode', [ a[i].nodeId, { silent:true } ]);
                            }
                        }

                    }
                    //禁用选择节点
                  function jyxzjd() {
                      var a=$('#searchTree').treeview('getChecked');
                      console.log(a);
                    /*  for (var i=0;i<a.length;i++){
                          console.log(a[i]);
                          var s=a[i].id;
                          if(s.search('S')!=-1){
                              $('#searchTree').treeview('disableNode', [ a[i].nodeId, { silent:true } ]);
                          }
                      }*/

                  }
                  //禁用所有节点
                    function jy() {
                        $('#searchTree').treeview('disableAll',options);
                       // disableAll(options);
                    }
                    //启用所有节点
                    function qxjy() {
                        $('#searchTree').treeview('enableAll',options);
                    }
                </script>
            </div>
            <div class="layui-col-xs6 layui-col-sm6 layui-col-md4">
                ss
            </div>
            <div class="layui-col-xs4 layui-col-sm12 layui-col-md4">
              ss
            </div>
            <div class="layui-col-xs4 layui-col-sm7 layui-col-md8">
                移动：4/12 | 平板：7/12 | 桌面：8/12
            </div>
            <div class="layui-col-xs4 layui-col-sm5 layui-col-md4">
                移动：4/12 | 平板：5/12 | 桌面：4/12
            </div>
        </div>
    </div>
</body>
</html>