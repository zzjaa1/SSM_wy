<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>报表中心投诉统计</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/property.css">
    <style>
        body{background-color:#F9F9F9}
        header{z-index:100}
        .chairFix:after{  content:"";  clear:both;  display:block;  }
        #con_head a{  font-size:14px;  color: #666666;  }
        .chooseIn_top{height:37px;line-height:37px;border-bottom:1px solid #CDCDCD;}
        .chooseIn_top div{width:34px; text-align: center;border-right:1px solid #CDCDCD;  float: left;}
        .chooseIn_top h5{ float: left;padding-left:20px;}
        .touSu{border:1px solid #CDCDCD;width:97%;margin:20px auto}
        .container1,.container2{  float: left;height:250px;width:50%}
        .chooseDate{font-size:14px;position:absolute;top:10px;right:10px;}
        .chooseDate input{width:57px;height:20px;}
        .chooseIn_foot{width:100%;margin-top:20px;position:relative}
    </style>
</head>

<script src="/ssm_wy/Echarts/echarts.js"></script>
<script src="/ssm_wy/Echarts/echarts-gl.js"></script>
<script src="/ssm_wy/js/jquery-1.9.1.min.js"></script>
<body onload="initChart()">
<div id="main" style="width: 1000px;height:800px;"></div>
<script>

    var x="";
    var y="";
    function initChart() {
        $.get("/ssm_wy/basDict/querybasDict",
            function (result, state) {
                var names = result.data;
                var xx = new Array();
                var yy = new Array();
                for (var i = 0; i < names.length; i++) {
                    var type = names[i].dict_type;
                    if (type.search('统计区域X') != -1) {
                        xx.push(names[i].dict_item);
                    } else if (type.search('统计区域Y') != -1) {
                        yy.push(names[i].dict_item);
                    }
                }
                var myChart = echarts.init(document.getElementById('main'));
                var hours = xx;
                var days = yy;

                var datas = new Array();
                $.ajax({
                    url: "/ssm_wy/BulidIng/queryB",
                    data: {xNumber: 'XQ4'},
                    dataType: 'json',
                    type: 'post',
                    async: false,
                    success: function (data) {
                        datas= data.data;

                    }
                });

                $.getScript('/ssm_wy/Echarts/simplex.js').done(function () {
                    var series = [];
                    console.log(datas);
                    for (var i = 1; i < 3; i++) {//层数
                        for (var j = 0; j < datas.length; j++) {//数据层数
                        if(datas[j].m!=undefined){
                            var fool=datas[j].m;
                            if(parseInt(fool)>=i){
                                var ss = new Array();
                                console.log("执行");
                                ss.push(parseInt(datas[j].X));
                                ss.push(parseInt(datas[j].Y));
                                ss.push(1);
                                console.log("X="+datas[j].X+"Y="+datas[j].Y+"Z="+i);
                                series.push({
                                    type: 'bar3D',
                                    data: ss,
                                    stack: 'stack',
                                    shading: 'lambert',
                                   name: datas[j].b_buliding + "," + i + "," + datas[j].b_number,
                                emphasis: {
                                    label: {
                                       formatter: function (params) {
                                        var a = params.seriesName.split(",");
                                        console.log(params);
                                        return a[0] + "第" + a[1] + "层-----------------------------";
                                    },
                                }
                            }
                            });
                            }
                        }
                           /* for (var j = 0; j < parseInt(fool); j++) {
                                console.log("222");
                                var ss = new Array();
                                console.log(datas[j]);
                                ss.push(parseInt(datas[i].X) - 1);
                                ss.push(parseInt(datas[i].Y) - 1);
                                ss.push(j+1);
                                series.push({
                                    type: 'bar3D',
                                    data: ss,
                                    stack: 'stack',
                                    shading: 'lambert',
                                 /!*   name: datas[i].b_buliding + "," + i + "," + datas[i].b_number,*!/
                                    emphasis: {
                                        label: {
                                          /!*  formatter: function (params) {
                                                var a = params.seriesName.split(",");
                                                console.log(params);
                                                return a[0] + "第" + a[1] + "层-----------------------------";
                                            },*!/
                                        }
                                    }
                                });
                            }*/
                            }
                    }
                    console.log("service");
                    console.log(series);
                    var myChart = echarts.init(document.getElementById('main'));
                    myChart.setOption({
                        xAxis3D: {
                            type: 'category',
                            data: [1,2,3,4,5,6]
                        },
                        yAxis3D: {
                            type: 'category',
                            data:  [1,2,3,4,5,6]
                        },
                        zAxis3D: {
                            type: 'value'
                        },
                        grid3D: {
                            viewControl: {
                                // autoRotate: true
                            },
                            light: {
                                main: {
                                    shadow: true,
                                    quality: 'ultra',
                                    intensity: 2
                                }
                            }
                        },
                        series: series
                    });

                });

            });
    }
</script>
</body>
</html>